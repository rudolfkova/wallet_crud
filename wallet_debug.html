<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wallet Debug</title>
<style>
  body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #eee; }
  h2 { color: #aaa; font-size: 14px; margin: 20px 0 8px; }
  input, select { background: #333; color: #eee; border: 1px solid #555; padding: 6px 8px; font-family: monospace; font-size: 13px; width: 300px; }
  button { background: #444; color: #eee; border: 1px solid #666; padding: 6px 14px; cursor: pointer; font-family: monospace; margin-left: 4px; }
  button:hover { background: #555; }
  #log { margin-top: 30px; border-top: 1px solid #333; padding-top: 16px; }
  .entry { margin-bottom: 12px; padding: 10px; background: #222; border-left: 3px solid #555; }
  .entry.ok { border-color: #4caf50; }
  .entry.err { border-color: #f44336; }
  .meta { font-size: 12px; color: #888; margin-bottom: 4px; }
  pre { margin: 0; font-size: 12px; white-space: pre-wrap; }
</style>
</head>
<body>

<b>Base URL:</b> <input id="base" value="http://localhost:8080">

<h2>GET Balance</h2>
Wallet ID: <input id="getWalletId" value="11111111-1111-1111-1111-111111111111">
<button onclick="getBalance()">Send</button>

<h2>POST Operation</h2>
Wallet ID: <input id="postWalletId" value="11111111-1111-1111-1111-111111111111"><br><br>
Type: <select id="opType"><option>DEPOSIT</option><option>WITHDRAW</option></select>
Amount: <input id="amount" value="100" style="width:100px">
<button onclick="postOp()">Send</button>

<div id="log"><i style="color:#666">No requests yet</i></div>

<script>
  const log = document.getElementById('log');

  function base() { return document.getElementById('base').value.replace(/\/$/, ''); }

  async function req(method, path, body) {
    const t = Date.now();
    let status, text;
    try {
      const r = await fetch(base() + path, {
        method,
        headers: { 'Content-Type': 'application/json' },
        body: body ? JSON.stringify(body) : undefined
      });
      status = r.status;
      text = await r.text();
    } catch(e) {
      text = e.message;
      status = 0;
    }

    const ms = Date.now() - t;
    let pretty = text;
    try { pretty = JSON.stringify(JSON.parse(text), null, 2); } catch {}

    const div = document.createElement('div');
    div.className = 'entry ' + (status >= 200 && status < 300 ? 'ok' : 'err');
    div.innerHTML =
      '<div class="meta">' + method + ' ' + path + ' → <b>' + (status || 'ERROR') + '</b> (' + ms + 'ms)</div>' +
      (body ? '<pre>→ ' + JSON.stringify(body) + '</pre>' : '') +
      '<pre>← ' + pretty + '</pre>';

    if (log.querySelector('i')) log.innerHTML = '';
    log.prepend(div);
  }

  function getBalance() {
    req('GET', '/api/v1/wallets/' + document.getElementById('getWalletId').value.trim());
  }

  function postOp() {
    req('POST', '/api/v1/wallet', {
      valletId: document.getElementById('postWalletId').value.trim(),
      operationType: document.getElementById('opType').value,
      amount: parseInt(document.getElementById('amount').value)
    });
  }
</script>
</body>
</html>
